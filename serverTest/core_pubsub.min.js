var core;(function(n){(function(t){var r=function(){function n(){this.subscribed=[]}return n}(),i,u;t.PubSubMessage=r,i=function(){function n(n,t){this.thread=n,this.callback=t}return n}(),t.PubSubToken=i,u=function(){function t(){this._threads=[]}return t.prototype.subscribe=function(t,u){var f=n.misc.getObjectClass(t);return this._threads[f]||(this._threads[f]=new r),this._threads[f].subscribed.push(u),new i(f,u)},t.prototype.unsubscribe=function(n){if(this._threads[n.thread])for(var t=this._threads[n.thread],i=t.subscribed.lenght;i--;)t.subscribed[i]===n.callback&&t.subscribed.splice(i,1)},t.prototype.publish=function(t){var u=n.misc.getObjectClass(t),i,r;if(this._threads[u])for(i=this._threads[u],r=i.subscribed.length;r--;)i.subscribed[r](t)},t}(),t.PubSub=u})(n.pubsub||(n.pubsub={}));var t=n.pubsub})(core||(core={}))