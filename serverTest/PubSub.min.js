var core;(function(n){(function(n){var i=function(){function n(){this.subscribed=[]}return n}(),t,r;n.PubSubMessage=i,t=function(){function n(n,t){this.thread=n,this.callback=t}return n}(),n.PubSubToken=t,r=function(){function n(){this._threads=[]}return n.prototype.subscribe=function(n,r){var u=getObjectClass(n);return this._threads[u]||(this._threads[u]=new i),this._threads[u].subscribed.push(r),new t(u,r)},n.prototype.unsubscribe=function(n){if(this._threads[n.thread])for(var t=this._threads[n.thread],i=t.subscribed.lenght;i--;)t.subscribed[i]===n.callback&&t.subscribed.splice(i,1)},n.prototype.publish=function(n){var r=getObjectClass(n),t,i;if(this._threads[r])for(t=this._threads[r],i=t.subscribed.length;i--;)t.subscribed[i](n)},n}(),n.PubSub=r})(n.pubsub||(n.pubsub={}));var t=n.pubsub})(core||(core={}))